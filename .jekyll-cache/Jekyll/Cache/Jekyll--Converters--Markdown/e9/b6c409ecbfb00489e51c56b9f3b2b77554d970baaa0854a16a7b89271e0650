I"<p>When you first install Ubuntu onto your computer, it automatically installs its own graphics drivers. If you happen to have NVIDIA graphics cards, you may in fact have to install them yourself, and it can lead you to have some problems if you do the wrong thing. This is inspired on the guidelines from Lubos Rendek on LinuxConfig.org in 2018-04-30 as it can be found <a href="https://linuxconfig.org/how-to-install-the-nvidia-drivers-on-ubuntu-18-04-bionic-beaver-linux">here</a>. When I followed their instructions, there were some extra steps that were not stated there and I ended up getting errors everywhere and I couldn’t log into my computer anymore. It would be stuck on the login screen. No matter how many times I entered the correct password, it would log back out, and the only way I was able to fix it was using <code class="language-plaintext highlighter-rouge">Ctrl+Alt+F3</code>.</p>

<h2 id="step-0-install-timeshift-in-case-shit-happens">Step 0: Install Timeshift in case shit happens</h2>

<p>Timeshift is a very nice program that creates restore points in case fuck ups happen with your system. Open Terminal and run the following lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt-add-repository -y ppa:teejee2008/ppa
$ sudo apt-get update
$ sudo apt-get install timeshift
</code></pre></div></div>

<p>Then you can open the application and <strong>create a restore point</strong>. Just in case! :)</p>

<h2 id="step-1-checking-what-specs-you-have">Step 1: Checking what Specs you have</h2>

<p>First, let’s check the model that you have, and see which are the drivers that are recommended for you. In the website above, you may find the following example.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ubuntu-drivers devices
== /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 ==
modalias : pci:v000010DEd00001180sv00001458sd0000353Cbc03sc00i00
vendor   : NVIDIA Corporation
model    : GP106 [GeForce GTX 1060 6GB]
driver   : nvidia-304 - distro non-free
driver   : nvidia-340 - distro non-free
driver   : nvidia-390 - distro non-free recommended
driver   : xserver-xorg-video-nouveau - distro free builtin

== cpu-microcode.py ==
driver   : intel-microcode - distro free
</code></pre></div></div>

<p>When running on my current computer (a Thinkpad P51), I get the following result:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ubuntu-drivers devices
== /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 ==
modalias : pci:v000010DEd00001436sv000017AAsd0000224Dbc03sc02i00
vendor   : NVIDIA Corporation
model    : GM206GLM [Quadro M2200 Mobile]
driver   : nvidia-driver-390 - distro non-free recommended
driver   : xserver-xorg-video-nouveau - distro free builtin
</code></pre></div></div>

<p><strong>From here on, I’ll follow the details of my own computer</strong></p>

<p>Here, we’ve seen that this computer possesses a <code class="language-plaintext highlighter-rouge">NVIDIA Quadro M2200 Mobile</code>, and the recommended driver to be installed is in fact <code class="language-plaintext highlighter-rouge">nvidia-390</code></p>

<h2 id="step-2-install-the-drivers">Step 2: Install the drivers</h2>
<p>From here, you may automatically install all of the drivers with the following command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo ubuntu-drivers autoinstall
</code></pre></div></div>

<p>Or you may install only the driver needed, which in this case would be for the <code class="language-plaintext highlighter-rouge">nvidia-390</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt install nvidia-390
</code></pre></div></div>

<p>You’ll see that this may take a little while :)</p>

<h2 id="step-3-reboot-the-system">Step 3: Reboot the System</h2>

<p>Here, you’ll now have to reboot the computer and you may be done. If you have encrypted the Ubuntu partition, as I have, you may need some more steps. I found some help over <a href="https://askubuntu.com/questions/1048135/install-nvidia-drivers-ubuntu-18-04-with-secure-boot">here</a>.</p>

<p>After you reboot, you may face the following screen
<img src="http://localhost:4000/assets/images/nvidia_ubuntu/secureboot_mok.jpg" alt="SecureBoot1" /></p>

<p><strong>MAKE SURE TO PRESS A KEY AND DO NOT LET THE TIMER RUN OUT OTHERWISE YOU MAY ENCOUNTER THE ERROR DESCRIBED ABOVE</strong></p>

<p>You will then see a few options</p>
<ul>
  <li>Continue boot</li>
  <li>Enroll MOK</li>
  <li>Enroll key from disk</li>
  <li>Enroll hash from disk</li>
</ul>

<p>Choose “<strong>Enroll MOK</strong>”
<img src="http://localhost:4000/assets/images/nvidia_ubuntu/secureboot_enrollmok.jpg" alt="SecureBoot2" /></p>

<p>Next, you may choose “View key 0”, but then choose “<strong>Continue</strong>”
<img src="http://localhost:4000/assets/images/nvidia_ubuntu/secureboot_continueboot.jpg" alt="SecureBoot2" /></p>

<p>From then, you should be able to successfully login.</p>

<h2 id="if-things-went-wrong-and-you-cant-login">If things went wrong and you can’t login</h2>

<p>If things went wrong, now we gotta fix it!</p>

<p>One thing that it helped people was to uninstall the NVIDIA drivers as it is shown <a href="https://askubuntu.com/questions/624966/cant-login-after-nvidia-driver-install-v-14-04">here</a>. In this case, enter the computer through the Terminal with <code class="language-plaintext highlighter-rouge">Ctrl+Alt+F3</code> or one of the other function numbers, and login into your account. Now uninstall your drivers with</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt-get purge nvidia*
</code></pre></div></div>

<p>If this still doesn’t work, assuming you’ve created a restore point, you can restore your system with Timeshift. First list your restore points, and then choose</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ timeshift --list
Device : /dev/dm-1
UUID   : d4ec6c13-ba8d-4f9a-90af-603184197a84
Path   : /
Mode   : RSYNC
Device is OK
10 snapshots, 165.4 GB free

Num     Name                 Tags  Description
------------------------------------------------------------------------------
0    &gt;  2018-08-14_19-20-34  O
1    &gt;  2019-01-14_13-00-11  D
2    &gt;  2019-01-15_15-00-01  D
3    &gt;  2019-01-16_15-00-01  D
4    &gt;  2019-01-17_16-00-04  D
5    &gt;  2019-01-18_11-41-45  O
6    &gt;  2019-01-18_16-00-02  D
7    &gt;  2019-01-20_20-02-58  D
8    &gt;  2019-01-22_16-00-02  D
9    &gt;  2019-01-23_00-33-04  O
</code></pre></div></div>

<p>Finally, you can restore it by running the following line:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ timeshift --restore --snapshot '2019-01-23_00-33-04'
</code></pre></div></div>

<p>You can then try things again, if you’d like!</p>
:ET